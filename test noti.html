<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Notification Example</title>
    <script>
        function showNotification() {
            if ("Notification" in window) {
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

                if (isMobile) {
                    // Nếu là thiết bị di động, sử dụng service worker để hiển thị thông báo
                    if ("serviceWorker" in navigator) {
                        navigator.serviceWorker.register("service-worker.js")
                            .then(registration => {
                                registration.showNotification("Thông báo từ trang web", {
                                    body: "Chào mừng bạn đến với trang web của chúng tôi!",
                                    icon: "img/icon.png"
                                });
                            })
                            .catch(error => console.error("Service Worker registration failed:", error));
                    }
                } else if (Notification.permission === "granted") {
                    const notification = new Notification("Thông báo từ trang web", {
                        body: "Chào mừng bạn đến với trang web của chúng tôi!",
                        icon: "img/icon.png"
                    });
                } else if (Notification.permission !== "denied") {
                    Notification.requestPermission().then(permission => {
                        if (permission === "granted") {
                            const notification = new Notification("Thông báo từ trang web", {
                                body: "Chào mừng bạn đến với trang web của chúng tôi!",
                                icon: "img/icon.png"
                            });
                        }
                    });
                }
            } else {
                alert("Trình duyệt của bạn không hỗ trợ thông báo.");
            }
        }
    </script>
</head>
<script>
    if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("service-worker.js")
            .then(registration => {
                console.log("Service Worker registered with scope:", registration.scope);
            })
            .catch(error => console.error("Service Worker registration failed:", error));
    }
</script>
<body>

    <h1>Web Notification Example</h1>

    <button onclick="showNotification()">Hiển thị thông báo</button>

</body>
</html>